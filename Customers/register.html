<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">

    <!-- Title Page-->
    <title>Register</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="register.css">

</head>
    <body>

        <div class="container">
            <div class="card wow bounceIn" data-wow-duration="1s">
                <div id="check" style="display: none;">
                    <div class="card-body">
                      <div class="card-image mb-3">
                        <img src="../images/41.png" id="imag" style="height: 150px;width: 200px;">
                      </div>
                      <br>

                      <p class="card-text text-center mb-3" style="font-size: 15px;color: black;">
                        Registration was successful.<br>Kindly Proceed.
                      </p>

                      <button class="btn btn-info" onclick="refresh()" style="margin: auto;display: grid;place-items:center;width:120px">OK</button>
                    </div>
                  </div>
                <div class="card-body" id="hide">
                    <div  class="row">
                       <div class="col-lg-4 first"></div>

                       <div class="col-lg-8 p-5">
                        <h4 class="card-header bg-secondary text-light p-3">Create Account
                            <i class="fa fa-user fa-2x" style="float: right;"></i>
                        </h4>
                        <h3 id="message"></h3>
                        <div class="row">
                            <div class="col-lg-6">
                                <p id="note" style="font-size: 13px; top: -5px;position: relative;color: red;"></p>
                                <div class="my-3 form-group form-floating">
                                    <input type="text" name="" class="form-control" placeholder="Firstname" id="firstname">
                                </div>
                            </div>
                            

                            <div class="col-lg-6">
                                <p id="note5" style="font-size: 13px; top: -5px;position: relative;"></p>
                                <div class="my-3 form-group">
                                    <input type="text" name="" class="form-control" placeholder="Lastname" id="lastname">
                                </div>
                            </div>
                            
                        </div>


                        <div>
                            <p id="note2" style="font-size: 13px;top: -5px;position: relative;"></p>
                            <div class="my-3 form-group">
                                <input type="email" name="" id="email" class="form-control" placeholder="Enter Email" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-lg-6">  
                            <p id="note3" style="font-size: 13px;top: -5px;position: relative;color: red;"></p>
                                <div class="my-3 form-group">        
                                    <input type="text" name="" id="uname" class="form-control" placeholder="Username">
                                </div>       
                            </div>

                            <div class="col-lg-6">
                                <p id="note4" style="font-size: 13px;top: -5px;position: relative;"></p>
                                <div class="my-3 form-group d-flex">
                                 <input type="password" id="password" name="" class="form-control" placeholder="Enter Password">
                                 <i class="fa fa-eye" onclick="show()" id="show"></i>
                                 <i class="fa fa-eye-slash" onclick="show()" id="sow" style="display: none;"></i>
                                </div>
                            </div>
                            <button class="btn btn-success mt-4" onclick="register()">Register
                                <i class="fa fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                        </div>
                       </div>
                   </div>
                     <!-- <div class="card-footer text-muted text-center">@FEMZY B Cinema</div> -->
                </div>

            </div>
        </div>
<script type="text/javascript">
    let user = JSON.parse(localStorage.getItem("registeredUsers"));

      register=()=>
      {
        var found = user.find((val, i)=>val.uname == uname.value);

       
        if (firstname.value == "")
        {
            document.getElementById("firstname").focus();
            note.innerHTML = "Firstname cannot be empty";
        }

        else if (lastname.value == "")
        {
            document.getElementById("lastname").style.border= "2px solid red";
            note5.innerHTML = "Lastname cannot be empty";
        }
        // else if(!firstname.value == "")
        // {
        //    document.getElementById("firstname").style.border= "2px solid white"; 
        //    document.getElementById("note").style.display= "none";
        // }
        else if (email.value == "") 
        {
            document.getElementById("email").style.border= "2px solid red";
            note2.innerHTML = "Email cannot be empty";
        }
        else if (uname.value == "") 
        {
            document.getElementById("uname").style.border= "2px solid red";
            note3.innerHTML = "Input cannot be empty";
        }
        else if (found) 
        {
            document.getElementById("uname");
            note3.innerHTML = "Username already exist";
        }
        else if (password.value ==  "") 
        {
            document.getElementById("password").style.border= "2px solid red";
            note4.innerHTML = "Password cannot be empty";
        }

        
        else{
        let firstName = firstname.value;
        let lastName = lastname.value;
        let emailAddress = email.value;
         let userName = uname.value;
         let pwd = password.value;

        finalResult = {
            // "id":  Math.random()
              "firstname": firstname.value,
            "lastname": lastname.value,
            "email": email.value,
            "uname": uname.value,
            "password": password.value
        }

        if(localStorage.getItem("registeredUsers"))
        {
            let datas = JSON.parse(localStorage.getItem("registeredUsers"));
            // let newData = data.push(finalResult)
            let newData = [...datas, finalResult]
            localStorage.setItem("registeredUsers", JSON.stringify(newData))
        } else if(!localStorage.getItem("registeredUsers"))
         {
           localStorage.setItem("registeredUsers", JSON.stringify([finalResult]))
        }

        document.getElementById("hide").style.display = "none";
        document.getElementById("check").style.display= "block";
        // location.reload(3000);
        
    }

}
 refresh=()=>
    { 
        window.open("login.html");
    }
    

    show = () =>
    {
    var input = document.getElementById("password")
     if (input.type === "password") 
     {
        input.type = "text";
        document.getElementById("sow").style.display="block";
        document.getElementById("show").style.display="none";
     }
     else
      {
        input.type = "password";
        document.getElementById("show").style.display="block";

        document.getElementById("sow").style.display="none";
       
     }

    }
</script>

</body>
</html>
